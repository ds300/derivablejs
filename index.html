<html><head><title>Havelock API Documentation</title><meta charset="utf-8"/><meta name="viewport"content="width=device-width, initial-scale=1"/><script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="dist/havelock.min.js"></script><script src="resources/js/sticky.js"></script><link rel="stylesheet"type="text/css"href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700"/><link rel="stylesheet"type="text/css"href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"/><link rel="stylesheet"type="text/css"href="http://fonts.googleapis.com/css?family=Questrial"/><link rel="stylesheet"type="text/css"href="resources/css/font-awesome.min.css"/><link rel="stylesheet"type="text/css"href="resources/css/normalize.css"/><link rel="stylesheet"type="text/css"href="resources/css/github.css"/><link rel="stylesheet"type="text/css"href="resources/css/custom.css"/></head><body><div class="container"><div id="toc-flex"><div id="spacer"></div><div id="toc"><ul><li class="subheading">Functions</li><li class="function"><a href="#havelock-atom"class="function">atom</a></li><li class="function"><a href="#havelock-swap"class="function">swap</a></li><li class="function"><a href="#havelock-derivation"class="function">derivation</a></li><li class="function"><a href="#havelock-derive"class="function">derive</a></li><li class="function"><a href="#havelock-transact"class="function">transact</a></li><li class="function"><a href="#havelock-transaction"class="function">transaction</a></li><li class="function"><a href="#havelock-unpack"class="function">unpack</a></li><li class="function"><a href="#havelock-struct"class="function">struct</a></li><li class="function"><a href="#havelock-ifThenElse"class="function">ifThenElse</a></li><li class="function"><a href="#havelock-or"class="function">or</a></li><li class="function"><a href="#havelock-and"class="function">and</a></li><li class="function"><a href="#havelock-not"class="function">not</a></li><li class="function"><a href="#havelock-switchCase"class="function">switchCase</a></li><li class="function"><a href="#havelock-get"class="function">get</a></li><li class="function"><a href="#havelock-set"class="function">set</a></li><li class="function"><a href="#havelock-lens"class="function">lens</a></li><li class="function"><a href="#havelock-lift"class="function">lift</a></li><li class="function"><a href="#havelock-isAtom"class="function">isAtom</a></li><li class="function"><a href="#havelock-isDerivable"class="function">isDerivable</a></li><li class="function"><a href="#havelock-isDerivation"class="function">isDerivation</a></li><li class="function"><a href="#havelock-isLensed"class="function">isLensed</a></li><li class="function"><a href="#havelock-isReaction"class="function">isReaction</a></li><li class="function"><a href="#havelock-withEquality"class="function">withEquality</a></li><li class="function"><a href="#havelock-defaultEquals"class="function">defaultEquals</a></li><li class="function"><a href="#havelock-ticker"class="function">ticker</a></li><li class="subheading">Classes</li><li class="interface"><a href="#havelock-Reaction"class="class">Reaction</a><ul><li class="method"><a href="#havelock-Reaction-constructor"class="method">constructor</a></li><li class="method"><a href="#havelock-Reaction-start"class="method">start</a></li><li class="method"><a href="#havelock-Reaction-stop"class="method">stop</a></li><li class="method"><a href="#havelock-Reaction-force"class="method">force</a></li><li class="method"><a href="#havelock-Reaction-react"class="method">react</a></li><li class="method"><a href="#havelock-Reaction-onStart"class="method">onStart</a></li><li class="method"><a href="#havelock-Reaction-onStop"class="method">onStop</a></li></ul></li><li class="subheading">Interfaces</li><li class="interface"><a href="#havelock-Derivable"class="interface">Derivable</a><ul><li class="method"><a href="#havelock-Derivable-derive"class="method">derive</a></li><li class="method"><a href="#havelock-Derivable-reaction"class="method">reaction</a></li><li class="method"><a href="#havelock-Derivable-react"class="method">react</a></li><li class="method"><a href="#havelock-Derivable-get"class="method">get</a></li><li class="method"><a href="#havelock-Derivable-is"class="method">is</a></li><li class="method"><a href="#havelock-Derivable-and"class="method">and</a></li><li class="method"><a href="#havelock-Derivable-or"class="method">or</a></li><li class="method"><a href="#havelock-Derivable-then"class="method">then</a></li><li class="method"><a href="#havelock-Derivable-not"class="method">not</a></li><li class="method"><a href="#havelock-Derivable-switch"class="method">switch</a></li></ul></li><li class="interface"><a href="#havelock-Atom"class="interface">Atom</a><ul><li class="method"><a href="#havelock-Atom-set"class="method">set</a></li><li class="method"><a href="#havelock-Atom-swap"class="method">swap</a></li><li class="method"><a href="#havelock-Atom-lens"class="method">lens</a></li></ul></li><li class="interface"><a href="#havelock-Lens"class="interface">Lens</a><ul><li class="method"><a href="#havelock-Lens-get"class="method">get</a></li><li class="method"><a href="#havelock-Lens-set"class="method">set</a></li></ul></li><li class="interface"><a href="#havelock-Ticker"class="interface">Ticker</a><ul><li class="method"><a href="#havelock-Ticker-tick"class="method">tick</a></li><li class="method"><a href="#havelock-Ticker-release"class="method">release</a></li></ul></li></ul></div></div><div id="head"><h1 id="title"><a href="https://github.com/ds300/havelock"title="See me in the Githubs"class="github"><i class="fa fa-github"></i></a>Havelock API</h1></div><div id="gradient-bit"></div><div id="page"><div class="module"><a id="havelock"href="#havelock"class="anchor"><i class="fa fa-anchor"></i></a><h2 class="code"><span class="punct">module </span><span class="module">havelock</span></h2><div class="docs"><p>Havelock is an holistic state management library. This is its API documentation.</p></div><div class="function"><a id="havelock-atom"href="#havelock-atom"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">atom<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a new <code><a href="#havelock-Atom"class="interface">Atom</a></code> containing <code><span class="param">value</span></code>.</p><pre><code class="javascript">const myAtom = atom&#40;`a string`&#41;;

myAtom.get&#40;&#41;;
// =&gt; `a string`
</code></pre></div></div></div><div class="function"><a id="havelock-swap"href="#havelock-swap"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">swap<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">, </span><span class="type-arg">B</span><span class="punct">&gt;</span></span></span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">atom</span><span class="punct">: </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="type-arg">A</span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">B</span></span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type-arg">B</span></h4><div class="docs"><p>Changes the contents of <code><span class="param">atom</span></code> to be the result of <code><span class="param">f</span></code> applied to <code><span class="param">atom</span></code>'s current value and <code><span class="param">…args</span></code>. Returns the new value.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Atom"class="interface">Atom</a><span class="punct">::</span><a href="#havelock-Atom-swap"class="method">swap</a></code></p></div></div></div><div class="function"><a id="havelock-derivation"href="#havelock-derivation"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">derivation<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">T</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a new derivable encapsulating the result returned by <code>f</code> which should be pure aside from dereferencing one or more <code><a href="#havelock-Derivable"class="interface">Derivable</a></code>s.</p><pre><code class="javascript">const x = atom&#40;1&#41;,
      y = atom&#40;2&#41;;

const z = derivation&#40;&#40;&#41; =&gt; x.get&#40;&#41; + y.get&#40;&#41;&#41;;

z.get&#40;&#41;;
// =&gt; 3

x.set&#40;2&#41;;
z.get&#40;&#41;;
// =&gt; 4

</code></pre></div></div></div><div class="function"><a id="havelock-derive"href="#havelock-derive"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">derive</span></h3><div class="function-signature"><h4 class="code"><span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">, </span><span class="type-arg">O</span><span class="punct">&gt;</span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">d</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">v</span><span class="punct">: </span><span class="type-arg">I</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">O</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">O</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Functional interface to <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code>.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code></p></div></div><div class="function-signature"><h4 class="code"><span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">, </span><span class="type-arg">O</span><span class="punct">, </span><span class="type-arg">A</span><span class="punct">&gt;</span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">d</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">v</span><span class="punct">: </span><span class="type-arg">I</span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="type-arg">A</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">O</span></span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="type-arg">A</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">O</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Functional interface to <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code>.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code></p></div></div><div class="function-signature"><h4 class="code"><span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">, </span><span class="type-arg">O</span><span class="punct">, </span><span class="type-arg">A</span><span class="punct">&gt;</span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">d</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">v</span><span class="punct">: </span><span class="type-arg">I</span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="type-arg">A</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">O</span></span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">O</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Functional interface to <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code>.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code></p></div></div><div class="function-signature"><h4 class="code"><span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">, </span><span class="type-arg">O</span><span class="punct">&gt;</span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">d</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">I</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">v</span><span class="punct">: </span><span class="type-arg">I</span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">O</span></span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">O</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Functional interface to <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code>.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-derive"class="method">derive</a></code></p></div></div><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">strings</span><span class="punct">: </span><span class="builtin-type">string<span class="punct">[]</span></span></span><span class="punct">, </span><span class="param"><span class="param">…things</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">string</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Tagged template string version of derive. Returns a derivable which represents <code><span class="param">strings</span></code> interploated with <code><span class="param">…things</span></code>, which latter may contain derivables.</p><pre><code class="javascript">const myAtom = atom&#40;`what`&#41;,
      myConstant = 4;

const myString =
  derive`Atom: '${myAtom}', constant: ${myConstant}.`;

myString.get&#40;&#41;;
// =&gt; `Atom: 'what', constant: 4.`

myAtom.set&#40;`nothing`&#41;;

myString.get&#40;&#41;;
// =&gt; `Atom: 'nothing', constant: 4.`

</code></pre></div></div></div><div class="function"><a id="havelock-transact"href="#havelock-transact"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">transact</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></h4><div class="docs"><p>Executes <code><span class="param">f</span></code> in the context of a transaction.</p><p>In a transactional context, changes to atoms do not have side effects. All changes made during the transaction are propagated for side effects when the transaction commits.</p><pre><code class="javascript">const firstName = `Joe`,
      lastName = `Schmoe`;

derive`My name is ${firstName} ${lastName}`.react&#40;
  x =&gt; console.log&#40;x&#41;;
&#41;;
// $&gt; My name is Joe Schmoe
</code></pre><p>All good, but now we want to change the name to Tigran Hamasayan.</p><pre><code class="javascript">firstName.set&#40;`Tigran`&#41;;
// $&gt; My name is Tigran Schmoe
</code></pre><p>Doh! Tigran Schmoe isn't a person! We certainly don't want reactions to think he is, that could be totally confusing for someone.</p><p><code><a href="#havelock-transact"class="function">transact</a></code> to the rescue! Let's abort the previous mission and try changing the name to William Blake without ever having a William Schmoe.</p><pre><code class="javascript">transact&#40;&#40;&#41; =&gt; {
  firstName.set&#40;`William`&#41;;
  lastName.set&#40;`Blake`&#41;;
}&#41;;
// $&gt; My name is William Blake
</code></pre><p>Success!</p></div></div></div><div class="function"><a id="havelock-transaction"href="#havelock-transaction"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">transaction</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="builtin-type">any</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="builtin-type">any</span></span></h4><div class="docs"><p>Wraps <code><span class="param">f</span></code> such that its body is executed in a transaction. Preserves its input and output semantics.</p><pre><code class="javascript">const firstName = `Joe`,
lastName = `Schmoe`;

derive`My name is ${firstName} ${lastName}`.react&#40;
  x =&gt; console.log&#40;x&#41;;
&#41;;
// $&gt; My name is Joe Schmoe

setTimeout&#40;transaction&#40;&#40;&#41; =&gt; {
  firstName.set&#40;`William`&#41;;
  lastName.set&#40;`Blake`&#41;;
}&#41;, 1000&#41;;

// ... 1 second later ...
// $&gt; My name is William Blake
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-transact"class="function">transact</a></code></p></div></div></div><div class="function"><a id="havelock-unpack"href="#havelock-unpack"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">unpack</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">obj</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">any</span></h4><div class="docs"><p>If <code><span class="param">obj</span></code> is derivable, returns <code>obj.get&#40;&#41;</code>, otherwise returns <code><span class="param">obj</span></code>.</p></div></div></div><div class="function"><a id="havelock-struct"href="#havelock-struct"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">struct</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">obj</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Given some plain JavaScript <code>Object</code> or <code>Array</code> (or some nested combination thereof) containing one or more derivable things, returns a new derivable representing the input collection with unpacked values. e.g.</p><pre><code class="javascript">const a = atom&#40;`Andrew`&#41;,
      b = atom&#40;`Bernice`&#41;,
      c = atom&#40;`Charlie`&#41;;

const together = struct&#40;{a: a, bandc: &#91;b, c&#93;}&#41;;

together.react&#40;names =&gt; {
  console.log&#40;`A stands for ${names.a}`&#41;;
  console.log&#40;`B stands for ${names.bandc&#91;0&#93;}`&#41;;
  console.log&#40;`C stands for ${names.bandc&#91;1&#93;}`&#41;;
}&#41;;
// $&gt; A stands for Andrew
// $&gt; B stands for Bernice
// $&gt; C stands for Charlie

c.set&#40;`Chris`&#41;;
// $&gt; A stands for Andrew
// $&gt; B stands for Bernice
// $&gt; C stands for Chris
</code></pre></div></div></div><div class="function"><a id="havelock-ifThenElse"href="#havelock-ifThenElse"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">ifThenElse</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">condition</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">thenD</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">, </span><span class="param"><span class="param">elseD</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which encapsulates the value <code>unpack&#40;thenD&#41;</code> when the value encapsulated by <code><span class="param">condition</span></code> is truthy, and <code>unpack&#40;elseD&#41;</code> when it is falsey.</p><pre><code class="javascript">const condition = atom&#40;true&#41;;

const thenD = atom&#40;`then`&#41;;
const elseD = `else`;

const result = ifThenElse&#40;condition, thenD, elseD&#41;;

result.get&#40;&#41;;
// =&gt; `then`

condition.set&#40;false&#41;;

result.get&#40;&#41;;
// =&gt; `else`
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-unpack"class="function">unpack</a></code>, <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-then"class="method">then</a></code></p></div></div></div><div class="function"><a id="havelock-or"href="#havelock-or"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">or</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">…conditions</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which encapsulates the first value in <code><span class="param">…conditions</span></code> which is truthy when passed through <code><a href="#havelock-unpack"class="function">unpack</a></code>;</p><pre><code class="javascript">or&#40;false, false, null, undefined, 0, ``, `yes`&#41;.get&#40;&#41;;
// =&gt; `yes`

or&#40;atom&#40;false&#41;,
   atom&#40;null&#41;,
   atom&#40;undefined&#41;,
   atom&#40;0&#41;,
   atom&#40;``&#41;,
   atom&#40;`yes`&#41;&#41;.get&#40;&#41;;
// =&gt; `yes`
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-or"class="method">or</a></code></p></div></div></div><div class="function"><a id="havelock-and"href="#havelock-and"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">and</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">…conditions</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which represents the last value in <code><span class="param">…conditions</span></code> iff all values are truthy when passed through <code><a href="#havelock-unpack"class="function">unpack</a></code>. Otherwise it represents whichever first value was falsey.</p><pre><code class="javascript">and&#40;1, true, `yes`, `lastvalue`&#41;.get&#40;&#41;;
// =&gt; `lastValue`

and&#40;1, true, 0, `lastvalue`&#41;.get&#40;&#41;;
// =&gt; 0
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-and"class="method">and</a></code></p></div></div></div><div class="function"><a id="havelock-not"href="#havelock-not"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">not</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">d</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">boolean</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which represents the boolean complement of the truthiness of the value encapsulated by <code><span class="param">d</span></code>.</p><p>A functional interface to the <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-not"class="method">not</a></code> method.</p></div></div></div><div class="function"><a id="havelock-switchCase"href="#havelock-switchCase"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">switchCase</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">d</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Functional interface to the <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-switch"class="method">switch</a></code> method.</p><pre><code class="javascript">switchCase&#40;d, ...args&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">d.switch&#40;...args&#41;;
</code></pre></div></div></div><div class="function"><a id="havelock-get"href="#havelock-get"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">get<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">d</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type-arg">T</span></h4><div class="docs"><p>Functional interface to the <code><a href="#havelock-Derivable"class="interface">Derivable</a><span class="punct">::</span><a href="#havelock-Derivable-get"class="method">get</a></code> method.</p><pre><code class="javascript">get&#40;d&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">d.get&#40;&#41;;
</code></pre></div></div></div><div class="function"><a id="havelock-set"href="#havelock-set"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">set<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">, </span><span class="type-arg">B</span><span class="punct">&gt;</span></span></span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">a</span><span class="punct">: </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">v</span><span class="punct">: </span><span class="type-arg">B</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">B</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Functional interface to the <code><a href="#havelock-Atom"class="interface">Atom</a><span class="punct">::</span><a href="#havelock-Atom-set"class="method">set</a></code> method.</p><pre><code class="javascript">set&#40;a, v&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">a.set&#40;v&#41;;
</code></pre></div></div></div><div class="function"><a id="havelock-lens"href="#havelock-lens"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">lens<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">, </span><span class="type-arg">B</span><span class="punct">&gt;</span></span></span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">atom</span><span class="punct">: </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">&gt;</span></span></a></span><span class="punct">, </span><span class="param"><span class="param">lens</span><span class="punct">: </span><a href="#havelock-Lens"class="interface">Lens<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">, </span><span class="type-arg">B</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">B</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>A functional interface to the <code><a href="#havelock-Atom"class="interface">Atom</a><span class="punct">::</span><a href="#havelock-Atom-lens"class="method">lens</a></code> method.</p><pre><code class="javascript">lens&#40;a, l&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">a.lens&#40;l&#41;;
</code></pre></div></div></div><div class="function"><a id="havelock-lift"href="#havelock-lift"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">lift</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="builtin-type">any</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">…args</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span><span class="punct">[]</span></a></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></span></h4><div class="docs"><p>Lifts a function that works on normal values to work on derivable values.</p><pre><code class="javascript">const add = &#40;a, b&#41; =&gt; a + b,
      x = atom&#40;5&#41;,
      y = atom&#40;10&#41;;

const addD = lift&#40;add&#41;;

const xplusy = addD&#40;x, y&#41;;

xplusy.get&#40;&#41;;
// =&gt; 15

x.set&#40;20&#41;;

xplusy.get&#40;&#41;;
// =&gt; 30
</code></pre></div></div></div><div class="function"><a id="havelock-isAtom"href="#havelock-isAtom"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">isAtom</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">obj</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">boolean</span></h4><div class="docs"><p>Returns true iff <code><span class="param">obj</span></code> is an <code><a href="#havelock-Atom"class="interface">Atom</a></code>.</p></div></div></div><div class="function"><a id="havelock-isDerivable"href="#havelock-isDerivable"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">isDerivable</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">obj</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">boolean</span></h4><div class="docs"><p>Returns true iff <code><span class="param">obj</span></code> is a <code><a href="#havelock-Derivable"class="interface">Derivable</a></code>.</p></div></div></div><div class="function"><a id="havelock-isDerivation"href="#havelock-isDerivation"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">isDerivation</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">obj</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">boolean</span></h4><div class="docs"><p>Returns true iff <code><span class="param">obj</span></code> is a derivation, i.e. a derivable which is not an atom.</p></div></div></div><div class="function"><a id="havelock-isLensed"href="#havelock-isLensed"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">isLensed</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">obj</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">boolean</span></h4><div class="docs"><p>Returns true iff <code><span class="param">obj</span></code> is a <em>lensed</em> atom.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Lens"class="interface">Lens</a></code>, <code><a href="#havelock-Atom"class="interface">Atom</a><span class="punct">::</span><a href="#havelock-Atom-lens"class="method">lens</a></code></p></div></div></div><div class="function"><a id="havelock-isReaction"href="#havelock-isReaction"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">isReaction</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">obj</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">boolean</span></h4><div class="docs"><p>Returns true iff <code>obj</code> is a <code><a href="#havelock-Reaction"class="class">Reaction</a></code>.</p></div></div></div><div class="function"><a id="havelock-withEquality"href="#havelock-withEquality"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">withEquality</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">equals</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">, </span><span class="param"><span class="param">b</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="builtin-type">boolean</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">any</span></h4><div class="docs"><p>Returns a new instance of havelock with a new notion of equality. Does not affect the current instance.</p></div></div></div><div class="function"><a id="havelock-defaultEquals"href="#havelock-defaultEquals"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">defaultEquals</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">, </span><span class="param"><span class="param">b</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">boolean</span></h4><div class="docs"><p>Havelock's inbuilt equality-checking function. Note that calling <code><a href="#havelock-withEquality"class="function">withEquality</a></code> will not affect the value of this property.</p></div></div></div><div class="function"><a id="havelock-ticker"href="#havelock-ticker"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">function </span><span class="function">ticker</span></h3><div class="function-signature"><h4 class="code"><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Ticker"class="interface">Ticker</a></h4><div class="docs"><p>Creates a new <code><a href="#havelock-Ticker"class="interface">Ticker</a></code></p></div></div></div><div class="class"><a id="havelock-Reaction"href="#havelock-Reaction"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">class </span><span class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></span></h3><div class="docs"><p>A Reaction is a stateful object which can be attached to a particular derivable. Changes in this derivable will cause a Reaction to be executed.</p></div><div class="method"><a id="havelock-Reaction-constructor"href="#havelock-Reaction-constructor"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">constructor</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span></h4></div><div class="method"><a id="havelock-Reaction-start"href="#havelock-Reaction-start"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.start</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Starts this reaction. After this is called, any changes in the derivable to which the reaction is attached will cause the reaction's .<code><a href="#havelock-Reaction-react"class="method">react</a></code> method to be called.</p><p>Calls the <code><a href="#havelock-Reaction-onStart"class="method">onStart</a></code> method if defined.</p></div></div><div class="method"><a id="havelock-Reaction-stop"href="#havelock-Reaction-stop"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.stop</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Stops this reaction. Changes in the attached derivable will no longer cause reaction.</p><p>Calls the <code><a href="#havelock-Reaction-onStop"class="method">onStop</a></code> method if defined.</p></div></div><div class="method"><a id="havelock-Reaction-force"href="#havelock-Reaction-force"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.force</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Forces reaction.</p></div></div><div class="method"><a id="havelock-Reaction-react"href="#havelock-Reaction-react"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.react</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></h4><div class="note"><p><em>Abstract<br/>Required</em></p></div><div class="docs"><p>This method is responsible for carrying out reactive side-effects based on <code><span class="param">value</span></code>.</p></div></div><div class="method"><a id="havelock-Reaction-onStart"href="#havelock-Reaction-onStart"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.onStart</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></h4><div class="note"><p><em>Abstract</em></p></div><div class="docs"><p>Called when the reaction is started. Use for acquiring resources.</p></div></div><div class="method"><a id="havelock-Reaction-onStop"href="#havelock-Reaction-onStop"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.onStop</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></h4><div class="note"><p><em>Abstract</em></p></div><div class="docs"><p>Called when the reaction is stopped. Use for releasing resources.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Reaction-stop"class="method">stop</a></code>, <code><a href="#havelock-Reaction-start"class="method">start</a></code></p></div></div></div><div class="interface"><a id="havelock-Derivable"href="#havelock-Derivable"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">interface </span><span class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></span></h3><div class="docs"><p>A thing that is derivable</p></div><div class="method"><a id="havelock-Derivable-derive"href="#havelock-Derivable-derive"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.derive<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">E</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Creates a new derivation based on the application of <code><span class="param">f</span></code> to the current value of this derivable. e.g.</p><pre><code class="javascript">const x = atom&#40;4&#41;;
const timesTwo = &#40;n&#41; =&gt; n &#42; 2;
const xTimesTwo = x.derive&#40;timesTwo&#41;;

xTimesTwo.get&#40;&#41;;
// =&gt; 8
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock"class="interface">havelock</a><span class="punct">::</span><a href="#havelock-derive"class="function">derive</a></code></p></div></div><div class="method"><a id="havelock-Derivable-derive"href="#havelock-Derivable-derive"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.derive<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">, </span><span class="type-arg">E</span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="type-arg">A</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">E</span></span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="type-arg">A</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Creates a new derivation based on the application of <code><span class="param">f</span></code> to the current value of this derivable and <code><span class="param">a</span></code>. e.g.</p><pre><code class="javascript">const x = atom&#40;4&#41;;
const times = &#40;a, b&#41; =&gt; a &#42; b;
const xTimesTwo = x.derive&#40;times, 2&#41;;

xTimesTwo.get&#40;&#41;;
// =&gt; 8
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock"class="interface">havelock</a><span class="punct">::</span><a href="#havelock-derive"class="function">derive</a></code></p></div></div><div class="method"><a id="havelock-Derivable-derive"href="#havelock-Derivable-derive"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.derive<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">, </span><span class="type-arg">E</span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><span class="type-arg">A</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">E</span></span></span><span class="punct">, </span><span class="param"><span class="param">a</span><span class="punct">: </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">A</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Creates a new derivation based on the application of <code><span class="param">f</span></code> to the current value of this derivable and the value represented by <code><span class="param">a</span></code>. e.g.</p><pre><code class="javascript">const y = atom&#40;5&#41;;
const xTimesY = x.derive&#40;times, y&#41;;

xTimesY.get&#40;&#41;;
// =&gt; 20

y.set&#40;10&#41;;
xTimesY.get&#40;&#41;;
// =&gt; 40
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock"class="interface">havelock</a><span class="punct">::</span><a href="#havelock-derive"class="function">derive</a></code>, <code><a href="#havelock-unpack"class="function">unpack</a></code></p></div></div><div class="method"><a id="havelock-Derivable-derive"href="#havelock-Derivable-derive"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.derive<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">E</span></span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Any-arity version of above. Unpacks all args.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock"class="interface">havelock</a><span class="punct">::</span><a href="#havelock-derive"class="function">derive</a></code>, <code><a href="#havelock-unpack"class="function">unpack</a></code></p></div></div><div class="method"><a id="havelock-Derivable-reaction"href="#havelock-Derivable-reaction"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.reaction</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">r</span><span class="punct">: </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Creates a link between <code><span class="param">r</span></code> and this derivable. <code><span class="param">r</span></code> should be a 'fresh' reaction. i.e. it should not have been linked to any other derivable in the past. For examples see <code><a href="#havelock-Reaction"class="class">Reaction</a></code></p></div></div><div class="method"><a id="havelock-Derivable-reaction"href="#havelock-Derivable-reaction"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.reaction</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Creates a new <code><a href="#havelock-Reaction"class="class">Reaction</a></code> based on <code><span class="param">f</span></code> being applied to this derivable. e.g.</p><pre><code class="javascript">const x = atom&#40;4&#41;;
const r = x.reaction&#40;x =&gt; console.log&#40;`x is`, x&#41;&#41;;

x.set&#40;8&#41;;

// .reaction creats the reaction, but doesn't start it,
// so nothing gets printed yet

r.start&#40;&#41;;

// now that the reaction has started it will respond
// to changes in x

x.set&#40;16&#41;;
// $&gt; x is 16

x.set&#40;32&#41;;
// $&gt; x is 32
</code></pre></div></div><div class="method"><a id="havelock-Derivable-react"href="#havelock-Derivable-react"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.react</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">r</span><span class="punct">: </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Creates a link between <code><span class="param">r</span></code> and this derivable. Starts and forces the reaction before returning it. i.e.</p><pre><code class="javascript">derivable.react&#40;r&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">derivable.reaction&#40;r&#41;.start&#40;&#41;.force&#40;&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-react"href="#havelock-Derivable-react"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.react</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Reaction"class="class">Reaction<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Creates a new <code><a href="#havelock-Reaction"class="class">Reaction</a></code> based on <code><span class="param">f</span></code> being applied to this derivable. Starts and forces the reaction before returning it. i.e.</p><pre><code class="javascript">derivable.react&#40;f&#41;;
</code></pre><p>is equivalent to</p><pre><code class="javascript">derivable.reaction&#40;f&#41;.start&#40;&#41;.force&#40;&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-get"href="#havelock-Derivable-get"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.get</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type-arg">T</span></h4><div class="docs"><p>Returns the current value of this derivable.</p><pre><code class="javascript">const x = atom&#40;`a string`&#41;;
x.get&#40;&#41;;
// =&gt; 'a string'
</code></pre></div></div><div class="method"><a id="havelock-Derivable-is"href="#havelock-Derivable-is"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.is</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">other</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">boolean</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which represents the equality of the values held in this and <code><span class="param">other</span></code>.</p><pre><code class="javascript">let a = atom&#40;`a`&#41;,
    b = atom&#40;`b`&#41;;

let same = a.is&#40;b&#41;;

same.get&#40;&#41;;
// =&gt; false

b.set&#40;`a`&#41;;

same.get&#40;&#41;;
// =&gt; true
</code></pre></div></div><div class="method"><a id="havelock-Derivable-and"href="#havelock-Derivable-and"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.and</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">other</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which represents the boolean AND composition of the values held in this and <code><span class="param">other</span></code>.</p><pre><code class="javascript">const condition = atom&#40;`truthy value`&#41;;

const result = condition.and&#40;`yes truthy`&#41;;

result.get&#40;&#41;;
// =&gt; `yes truthy`

condition.set&#40;false&#41;;

result.get&#40;&#41;;
// =&gt; false
</code></pre><p><code>other</code> can be a derivable.</p><pre><code class="javascript">const result2 = result.and&#40;condition.derive&#40;s =&gt; s.split&#40;` `&#41;&#91;0&#93;&#41;&#41;;

result2.get&#40;&#41;;
// =&gt; false

condition.set&#40;`some string`&#41;;

result2.get&#40;&#41;;
// =&gt; `some`
</code></pre><p>Due to havelock's laziness, we can be sure that the derivation of <code>condition</code> (the string splitting bit) will only ever be evaluated when <code>condition</code> contains a truthy value.</p></div></div><div class="method"><a id="havelock-Derivable-or"href="#havelock-Derivable-or"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.or</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">other</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which represents the boolean OR composition of the values held in this and <code><span class="param">other</span></code>.</p><pre><code class="javascript">const first = atom&#40;`truthy value`&#41;;
const second = atom&#40;false&#41;;

first.or&#40;second&#41;.get&#40;&#41;;
// =&gt; `truthy value`

second.or&#40;first&#41;.get&#40;&#41;;
// =&gt; `truthy value`

first.set&#40;false&#41;;

second.or&#40;first&#41;.get&#40;&#41;;
// =&gt; false

first.set&#40;`first`&#41;;
second.set&#40;`second`&#41;;

first.or&#40;second&#41;.get&#40;&#41;;
// =&gt; `first`

second.or&#40;first&#41;.get&#40;&#41;;
// =&gt; `second`
</code></pre></div></div><div class="method"><a id="havelock-Derivable-then"href="#havelock-Derivable-then"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.then</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">thenD</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">, </span><span class="param"><span class="param">elseD</span><span class="punct">: </span><span class="builtin-type">any</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which represents the value of <code><span class="param">thenD</span></code> if this is truthy, or <code><span class="param">elseD</span></code> otherwise.</p><p>Equivalent to:</p><pre><code class="javascript">this.and&#40;thenD&#41;.or&#40;elseD&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-not"href="#havelock-Derivable-not"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.not</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">boolean</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a derivable which represents the boolean complement of the truthiness of the the value represented by this.</p><p>Equivalent to:</p><pre><code class="javascript">this.derive&#40;x =&gt; !x&#41;;
</code></pre></div></div><div class="method"><a id="havelock-Derivable-switch"href="#havelock-Derivable-switch"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.switch</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="builtin-type">any</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p><code><span class="param">…args</span></code> is a flat list of (comparatee, value) pairs. If the value represented by this derivable is equal to a comparatee (which can be derivable or not), a derivable representing the comparatee's corresponding value is returned. If none match, the value represented is <code>undefined</code> unless a trailing value is supplied.</p><pre><code class="javascript">const x = atom&#40;3&#41;;

const y = x.switch&#40;
  1, `one`,
  2, `two`,
  3, `three`
&#41;;

y.get&#40;&#41;;
// =&gt; `three`

x.set&#40;4&#41;;

y.get&#40;&#41;;
// =&gt; undefined

const z = x.switch&#40;
  5, `five`,
  6, `six`,
  `other`
&#41;;

z.get&#40;&#41;;
// =&gt; `other`
</code></pre></div></div></div><div class="interface"><a id="havelock-Atom"href="#havelock-Atom"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">interface </span><span class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></span></h3><h4 class="code"><span class="punct">extends </span><a href="#havelock-Derivable"class="interface">Derivable<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Represents a mutable reference. Should hold immutable, or effectively immutable data.</p></div><div class="method"><a id="havelock-Atom-set"href="#havelock-Atom-set"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.set<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">E</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Sets the value of this atom to be <code><span class="param">value</span></code>, returns this atom</p></div></div><div class="method"><a id="havelock-Atom-swap"href="#havelock-Atom-swap"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.swap<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">f</span><span class="punct">: </span><span class="type"><span class="params"><span class="punct">(</span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">T</span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span><span class="punct"> =&gt; </span><span class="type-arg">E</span></span></span><span class="punct">, </span><span class="param"><span class="param">…args</span><span class="punct">: </span><span class="builtin-type">any<span class="punct">[]</span></span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Sets the value of this atom to be the value returned when <code><span class="param">f</span></code> is applied to the current value of this and <code><span class="param">…args</span></code>. Returns this.</p><p>Equivalent to:</p><pre><code class="javascript">this.set&#40;f.apply&#40;null, &#91;this.get&#40;&#41;&#93;.concat&#40;args&#41;&#41;&#41;;
</code></pre></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock"class="interface">havelock</a><span class="punct">::</span><a href="#havelock-swap"class="function">swap</a></code></p></div></div><div class="method"><a id="havelock-Atom-lens"href="#havelock-Atom-lens"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.lens<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">lens</span><span class="punct">: </span><a href="#havelock-Lens"class="interface">Lens<span><span class="punct">&lt;</span><span class="type-arg">T</span><span class="punct">, </span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><a href="#havelock-Atom"class="interface">Atom<span><span class="punct">&lt;</span><span class="type-arg">E</span><span class="punct">&gt;</span></span></a></h4><div class="docs"><p>Returns a new atom connected to this one via the logic encapsulated by <code><span class="param">lens</span></code>.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-Lens"class="interface">Lens</a></code></p></div></div></div><div class="interface"><a id="havelock-Lens"href="#havelock-Lens"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">interface </span><span class="interface">Lens<span><span class="punct">&lt;</span><span class="type-arg">ParentType</span><span class="punct">, </span><span class="type-arg">ChildType</span><span class="punct">&gt;</span></span></span></h3><div class="docs"><p>The value returned from <code><a href="#havelock-Atom"class="interface">Atom</a><span class="punct">::</span><a href="#havelock-Atom-lens"class="method">lens</a></code> is a <em>lensed</em> atom. This is a kind of cross between an atom and a derivation. It acts as a mutable proxy for some base atom, which lets consumers modify the base atom without knowing precisely how. This knowledge is encoded in a lens as <code><a href="#havelock-Lens-get"class="method">get</a></code> and <code><a href="#havelock-Lens-set"class="method">set</a></code> functions.</p><p>For example, you could (but probably shouldn't) store your entire application state as a json string, e.g.</p><pre><code class="javascript">const jsonState = atom&#40;JSON.stringify&#40;{
  username: `Tigran`,
  sessionID: `x3rfs`
}&#41;&#41;;
</code></pre><p>and then use you could create a generic json lens to access and mutate properties within that string:</p><pre><code class="javascript">function jsonLens &#40;prop&#41; {
  return {
    get &#40;json&#41; {
      return JSON.parse&#40;json&#41;&#91;prop&#93;;
    },
    set &#40;json, value&#41; {
      let state = JSON.parse&#40;json&#41;;
      state&#91;prop&#93; = value;
      return JSON.stringify&#40;state&#41;;
    }
  }
}

const username = jsonState.lens&#40;jsonLens&#40;`username`&#41;&#41;;

username.get&#40;&#41;;
// =&gt; `Tigran`

username.set&#40;`Franny`&#41;;

jsonState.get&#40;&#41;;
// =&gt; `{&quot;username&quot;: &quot;Franny&quot;, &quot;sessionID&quot;: &quot;x3rfs&quot;}`

username.get&#40;&#41;;
// =&gt; `Franny`
</code></pre><p>If someone has the <code>username</code> atom, they can be completely oblivious to the fact that it is an abstraction over a json string, treating it like a normal atom. This is the power of lenses!</p><p>But lenses also <em>compose</em>!</p><p>For example, if wanted to pass <code>username</code> to someone who can only read backwards, we could do the following:</p><pre><code class="javascript">function stringReverse &#40;s&#41; {
  let result = ``;
  for &#40;let c of s&#41; {
    result = c + result;
  }
  return result;
}
const reverseLens = {
  get: s =&gt; stringReverse&#40;s&#41;,
  set: &#40;&#95;, s&#41; =&gt; stringReverse&#40;s&#41;
};

const emanresu = username.lens&#40;reverseLens&#41;;

emanresu.get&#40;&#41;;
// =&gt; `ynnarF`

emanresu.set&#40;`drahciR`&#41;;

jsonState.get&#40;&#41;;
// =&gt; `{&quot;username&quot;: &quot;Richard&quot;, &quot;sessionID&quot;: &quot;x3rfs&quot;}`
</code></pre><p>Now the poor soul who can only read backwards doesn't ever have to think about reversing strings ever again.</p></div><div class="method"><a id="havelock-Lens-get"href="#havelock-Lens-get"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.get</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">source</span><span class="punct">: </span><span class="type-arg">ParentType</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type-arg">ChildType</span></h4><div class="docs"><p>Returns the lensed value extracted from <code><span class="param">source</span></code>.</p><p>Called with <code>this</code> set to <code>null</code>.</p></div></div><div class="method"><a id="havelock-Lens-set"href="#havelock-Lens-set"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.set</span><span class="params"><span class="params"><span class="punct">(</span><span class="param"><span class="param">source</span><span class="punct">: </span><span class="type-arg">ParentType</span></span><span class="punct">, </span><span class="param"><span class="param">value</span><span class="punct">: </span><span class="type-arg">ChildType</span></span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="type-arg">ParentType</span></h4><div class="docs"><p>Returns the transformed version of <code><span class="param">source</span></code> which includes <code><span class="param">value</span></code>.</p><p>Called with <code>this</code> set to <code>null</code>.</p></div></div></div><div class="interface"><a id="havelock-Ticker"href="#havelock-Ticker"class="anchor"><i class="fa fa-anchor"></i></a><h3 class="code"><span class="punct">interface </span><span class="interface">Ticker</span></h3><div class="docs"><p>Tickers provide a facility for running reactions globally at custom intervals. Tickers have a lifecycle which begins when they are created by the <code><a href="#havelock-ticker"class="function">ticker</a></code> function and end when their <code>.release&#40;&#41;</code> method is invoked. A ticker may not be used after it has been released.</p><p>While at least one ticker is alive, the <code><a href="#havelock-Atom"class="interface">Atom</a><span class="punct">::</span><a href="#havelock-Atom-set"class="method">set</a></code> method will not cause reactions to be run.</p></div><div class="see-also"><p><span class="label">See also: </span><code><a href="#havelock-ticker"class="function">ticker</a></code></p></div><div class="method"><a id="havelock-Ticker-tick"href="#havelock-Ticker-tick"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.tick</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></h4><div class="docs"><p>Runs all pending reactions</p></div></div><div class="method"><a id="havelock-Ticker-release"href="#havelock-Ticker-release"class="anchor"><i class="fa fa-anchor"></i></a><h4 class="code"><span class="method">.release</span><span class="params"><span class="params"><span class="punct">(</span><span class="punct">)</span></span></span><span class="punct"> =&gt; </span><span class="builtin-type">void</span></h4><div class="docs"><p>Releases this ticker, rendering it useless</p></div></div></div></div><p class="footer"><em>This documentation was generated from the file </em><code>havelock.api.edn</code>.</p></div></div></body></html>